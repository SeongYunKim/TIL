## Environment

> 프로파일과 프로퍼티를 다루는 인터페이스

- ApplicationContext extends **EnvironmentCapable**

  - applicationContext.getEnvironment()
  
## 프로파일(Profile)

- 프로파일

  - 빈들의 묶음

  - environment.getDefaultProfile()

  - Environment의 역할은 활성화 할 프로파일 확인 및 설정
  
- 프로파일 유즈케이션

  - 테스트 환경에서는 A라는 빈을 사용하고, 배포 환경에서는 B라는 빈을 사용하고 싶다.
  
  - 이 빈은 모니터링 용도니까 테스트할 때는 필요 없고 배포할 때만 등록되었으면 좋겠다.
  
  - 등등 **상황에 따라 다른 빈들을 사용하고 싶을 때**
  
- 프로파일 정의하기

  - 클래스에 정의
  
    - 빈 설정 파일에서 정의
  
    ```java
    //test 프로파일 일때만 사용되는 빈 설정 파일
    @Configuration
    @Profile("test")
    public class TestConfiguration {
  
      //BookRepository는 test 프로파일 일때만 빈으로 등록
      @Bean
      public BookRepository bookRepository() {
        return new TestBookRepository();
      }
    }
    ```
    
    - 직접 빈 클래스에서 정의
    
    ```java
    @Repository
    //test 프로파일이 아닐 때만 빈으로 등록
    //!: not, &: and, |: or
    @Profile("!test")
    publi8c class TestBookRepository implements BookRepository {
    
    }
    
    ```
    
  - 메소드에 정의: *@Bean Profile("test")*
  
- 프로파일 설정하기

  - Run/Debug Configuration > VM options: -Dspirng.profiles.active="profile_name"
